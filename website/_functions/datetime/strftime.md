---
examples:
  - - 'strftime("%A", 1062462400); // Return value will depend on date and locale'
returns:
  - - "'Tuesday'"
authors:
  original by:
    - 'Blues (http://tech.bluesmoon.info/)'
  improved by:
    - 'Brett Zamir (http://brett-zamir.me)'
  bugfixed by:
    - 'Brett Zamir (http://brett-zamir.me)'
  input by:
    - Alex
notes:
  - - 'Uses global: php_js to store locale info'
layout: function
function: strftime
category: datetime
code: "function strftime (fmt, timestamp) {\n  //       discuss at: http://phpjs.org/functions/strftime/\n  //      original by: Blues (http://tech.bluesmoon.info/)\n  // reimplemented by: Brett Zamir (http://brett-zamir.me)\n  //         input by: Alex\n  //      bugfixed by: Brett Zamir (http://brett-zamir.me)\n  //      improved by: Brett Zamir (http://brett-zamir.me)\n  //       depends on: setlocale\n  //             note: Uses global: php_js to store locale info\n  //        example 1: strftime(\"%A\", 1062462400); // Return value will depend on date and locale\n  //        returns 1: 'Tuesday'\n\n  this.php_js = this.php_js || {}\n  // ensure setup of localization variables takes place\n  this.setlocale('LC_ALL', 0)\n  // END REDUNDANT\n  var phpjs = this.php_js\n\n  // BEGIN STATIC\n  var _xPad = function (x, pad, r) {\n    if (typeof r === 'undefined') {\n      r = 10\n    }\n    for (; parseInt(x, 10) < r && r > 1; r /= 10) {\n      x = pad.toString() + x\n    }\n    return x.toString()\n  }\n\n  var locale = phpjs.localeCategories.LC_TIME\n  var locales = phpjs.locales\n  var lc_time = locales[locale].LC_TIME\n\n  var _formats = {\n    a: function (d) {\n      return lc_time.a[d.getDay()]\n    },\n    A: function (d) {\n      return lc_time.A[d.getDay()]\n    },\n    b: function (d) {\n      return lc_time.b[d.getMonth()]\n    },\n    B: function (d) {\n      return lc_time.B[d.getMonth()]\n    },\n    C: function (d) {\n      return _xPad(parseInt(d.getFullYear() / 100, 10), 0)\n    },\n    d: ['getDate', '0'],\n    e: ['getDate', ' '],\n    g: function (d) {\n      return _xPad(parseInt(this.G(d) / 100, 10), 0)\n    },\n    G: function (d) {\n      var y = d.getFullYear()\n      var V = parseInt(_formats.V(d), 10)\n      var W = parseInt(_formats.W(d), 10)\n\n      if (W > V) {\n        y++\n      } else if (W === 0 && V >= 52) {\n        y--\n      }\n\n      return y\n    },\n    H: ['getHours', '0'],\n    I: function (d) {\n      var I = d.getHours() % 12\n      return _xPad(I === 0 ? 12 : I, 0)\n    },\n    j: function (d) {\n      var ms = d - new Date('' + d.getFullYear() + '/1/1 GMT')\n      // Line differs from Yahoo implementation which would be equivalent to replacing it here with:\n      ms += d.getTimezoneOffset() * 60000\n      // ms = new Date('' + d.getFullYear() + '/' + (d.getMonth()+1) + '/' + d.getDate() + ' GMT') - ms;\n      var doy = parseInt(ms / 60000 / 60 / 24, 10) + 1\n      return _xPad(doy, 0, 100)\n    },\n    k: ['getHours', '0'],\n    // not in PHP, but implemented here (as in Yahoo)\n    l: function (d) {\n      var l = d.getHours() % 12\n      return _xPad(l === 0 ? 12 : l, ' ')\n    },\n    m: function (d) {\n      return _xPad(d.getMonth() + 1, 0)\n    },\n    M: ['getMinutes', '0'],\n    p: function (d) {\n      return lc_time.p[d.getHours() >= 12 ? 1 : 0]\n    },\n    P: function (d) {\n      return lc_time.P[d.getHours() >= 12 ? 1 : 0]\n    },\n    s: function (d) {\n      // Yahoo uses return parseInt(d.getTime()/1000, 10);\n      return Date.parse(d) / 1000\n    },\n    S: ['getSeconds', '0'],\n    u: function (d) {\n      var dow = d.getDay()\n      return ((dow === 0) ? 7 : dow)\n    },\n    U: function (d) {\n      var doy = parseInt(_formats.j(d), 10)\n      var rdow = 6 - d.getDay()\n      var woy = parseInt((doy + rdow) / 7, 10)\n      return _xPad(woy, 0)\n    },\n    V: function (d) {\n      var woy = parseInt(_formats.W(d), 10)\n      var dow1_1 = (new Date('' + d.getFullYear() + '/1/1'))\n        .getDay()\n      // First week is 01 and not 00 as in the case of %U and %W,\n      // so we add 1 to the final result except if day 1 of the year\n      // is a Monday (then %W returns 01).\n      // We also need to subtract 1 if the day 1 of the year is\n      // Friday-Sunday, so the resulting equation becomes:\n      var idow = woy + (dow1_1 > 4 || dow1_1 <= 1 ? 0 : 1)\n      if (idow === 53 && (new Date('' + d.getFullYear() + '/12/31'))\n        .getDay() < 4) {\n        idow = 1\n      } else if (idow === 0) {\n        idow = _formats.V(new Date('' + (d.getFullYear() - 1) + '/12/31'))\n      }\n      return _xPad(idow, 0)\n    },\n    w: 'getDay',\n    W: function (d) {\n      var doy = parseInt(_formats.j(d), 10)\n      var rdow = 7 - _formats.u(d)\n      var woy = parseInt((doy + rdow) / 7, 10)\n      return _xPad(woy, 0, 10)\n    },\n    y: function (d) {\n      return _xPad(d.getFullYear() % 100, 0)\n    },\n    Y: 'getFullYear',\n    z: function (d) {\n      var o = d.getTimezoneOffset()\n      var H = _xPad(parseInt(Math.abs(o / 60), 10), 0)\n      var M = _xPad(o % 60, 0)\n      return (o > 0 ? '-' : '+') + H + M\n    },\n    Z: function (d) {\n      return d.toString()\n        .replace(/^.*\\(([^)]+)\\)$/, '$1')\n      /*\n      // Yahoo's: Better?\n      var tz = d.toString().replace(/^.*:\\d\\d( GMT[+-]\\d+)? \\(?([A-Za-z ]+)\\)?\\d*$/, '$2').replace(/[a-z ]/g, '');\n      if(tz.length > 4) {\n        tz = Dt.formats.z(d);\n      }\n      return tz;\n      */\n    },\n    '%': function (d) {\n      return '%'\n    }\n  }\n  // END STATIC\n  /* Fix: Locale alternatives are supported though not documented in PHP; see http://linux.die.net/man/3/strptime\nEc\nEC\nEx\nEX\nEy\nEY\nOd or Oe\nOH\nOI\nOm\nOM\nOS\nOU\nOw\nOW\nOy\n  */\n\n  var _date = ((typeof timestamp === 'undefined') ? new Date() : // Not provided\n    (typeof timestamp === 'object') ? new Date(timestamp) : // Javascript Date()\n    new Date(timestamp * 1000) // PHP API expects UNIX timestamp (auto-convert to int)\n  )\n\n  var _aggregates = {\n    c: 'locale',\n    D: '%m/%d/%y',\n    F: '%y-%m-%d',\n    h: '%b',\n    n: '\\n',\n    r: 'locale',\n    R: '%H:%M',\n    t: '\\t',\n    T: '%H:%M:%S',\n    x: 'locale',\n    X: 'locale'\n  }\n\n  // First replace aggregates (run in a loop because an agg may be made up of other aggs)\n  while (fmt.match(/%[cDFhnrRtTxX]/)) {\n    fmt = fmt.replace(/%([cDFhnrRtTxX])/g, function (m0, m1) {\n      var f = _aggregates[m1]\n      return (f === 'locale' ? lc_time[m1] : f)\n    })\n  }\n\n  // Now replace formats - we need a closure so that the date object gets passed through\n  var str = fmt.replace(/%([aAbBCdegGHIjklmMpPsSuUVwWyYzZ%])/g, function (m0, m1) {\n    var f = _formats[m1]\n    if (typeof f === 'string') {\n      return _date[f]()\n    } else if (typeof f === 'function') {\n      return f(_date)\n    } else if (typeof f === 'object' && typeof f[0] === 'string') {\n      return _xPad(_date[f[0]](), f[1])\n    } else {\n      // Shouldn't reach here\n      return m1\n    }\n  })\n  return str\n}\n"
permalink: /functions/strftime/
redirect_from:
  - /functions/datetime/strftime/
---

<!-- WARNING! This file is auto generated by `npm run web:inject`, do not edit by hand -->
