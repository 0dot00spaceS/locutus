---
examples:
  - - "version_compare('8.2.5rc', '8.2.5a');"
  - - "version_compare('8.2.50', '8.2.52', '<');"
  - - "version_compare('5.3.0-dev', '5.3.0');"
  - - "version_compare('4.1.0.52','4.01.0.51');"
returns:
  - - '1'
  - - 'true'
  - - '-1'
  - - '1'
authors:
  original by:
    - 'Philippe Jausions (http://pear.php.net/user/jausions)'
    - 'Aidan Lister (http://aidanlister.com/)'
  improved by:
    - 'Brett Zamir (http://brett-zamir.me)'
    - Scott Baker
    - Theriault
notes: []
layout: function
function: version_compare
category: info
code: "function version_compare (v1, v2, operator) {\n  //       discuss at: http://phpjs.org/functions/version_compare/\n  //      original by: Philippe Jausions (http://pear.php.net/user/jausions)\n  //      original by: Aidan Lister (http://aidanlister.com/)\n  // reimplemented by: Kankrelune (http://www.webfaktory.info/)\n  //      improved by: Brett Zamir (http://brett-zamir.me)\n  //      improved by: Scott Baker\n  //      improved by: Theriault\n  //        example 1: version_compare('8.2.5rc', '8.2.5a');\n  //        returns 1: 1\n  //        example 2: version_compare('8.2.50', '8.2.52', '<');\n  //        returns 2: true\n  //        example 3: version_compare('5.3.0-dev', '5.3.0');\n  //        returns 3: -1\n  //        example 4: version_compare('4.1.0.52','4.01.0.51');\n  //        returns 4: 1\n\n  this.php_js = this.php_js || {}\n  this.php_js.ENV = this.php_js.ENV || {}\n  // END REDUNDANT\n  // Important: compare must be initialized at 0.\n  var i,\n    x,\n    compare = 0,\n    // vm maps textual PHP versions to negatives so they're less than 0.\n    // PHP currently defines these as CASE-SENSITIVE. It is important to\n    // leave these as negatives so that they can come before numerical versions\n    // and as if no letters were there to begin with.\n    // (1alpha is < 1 and < 1.1 but > 1dev1)\n    // If a non-numerical value can't be mapped to this table, it receives\n    // -7 as its value.\n    vm = {\n      'dev': -6,\n      'alpha': -5,\n      'a': -5,\n      'beta': -4,\n      'b': -4,\n      'RC': -3,\n      'rc': -3,\n      '#': -2,\n      'p': 1,\n      'pl': 1\n    },\n    // This function will be called to prepare each version argument.\n    // It replaces every _, -, and + with a dot.\n    // It surrounds any nonsequence of numbers/dots with dots.\n    // It replaces sequences of dots with a single dot.\n    //    version_compare('4..0', '4.0') == 0\n    // Important: A string of 0 length needs to be converted into a value\n    // even less than an unexisting value in vm (-7), hence [-8].\n    // It's also important to not strip spaces because of this.\n    //   version_compare('', ' ') == 1\n    prepVersion = function (v) {\n      v = ('' + v)\n        .replace(/[_\\-+]/g, '.')\n      v = v.replace(/([^.\\d]+)/g, '.$1.')\n        .replace(/\\.{2,}/g, '.')\n      return (!v.length ? [-8] : v.split('.'))\n    },\n    // This converts a version component to a number.\n    // Empty component becomes 0.\n    // Non-numerical component becomes a negative number.\n    // Numerical component becomes itself as an integer.\n    numVersion = function (v) {\n      return !v ? 0 : (isNaN(v) ? vm[v] || -7 : parseInt(v, 10))\n    }\n  v1 = prepVersion(v1)\n  v2 = prepVersion(v2)\n  x = Math.max(v1.length, v2.length)\n  for (i = 0; i < x; i++) {\n    if (v1[i] == v2[i]) {\n      continue\n    }\n    v1[i] = numVersion(v1[i])\n    v2[i] = numVersion(v2[i])\n    if (v1[i] < v2[i]) {\n      compare = -1\n      break\n    } else if (v1[i] > v2[i]) {\n      compare = 1\n      break\n    }\n  }\n  if (!operator) {\n    return compare\n  }\n\n  // Important: operator is CASE-SENSITIVE.\n  // \"No operator\" seems to be treated as \"<.\"\n  // Any other values seem to make the function return null.\n  switch (operator) {\n    case '>':\n    case 'gt':\n      return (compare > 0)\n    case '>=':\n    case 'ge':\n      return (compare >= 0)\n    case '<=':\n    case 'le':\n      return (compare <= 0)\n    case '==':\n    case '=':\n    case 'eq':\n      return (compare === 0)\n    case '<>':\n    case '!=':\n    case 'ne':\n      return (compare !== 0)\n    case '':\n    case '<':\n    case 'lt':\n      return (compare < 0)\n    default:\n      return null\n  }\n}\n"
permalink: /functions/version_compare/
redirect_from:
  - /functions/info/version_compare/
---

<!-- WARNING! This file is auto generated by `npm run web:inject`, do not edit by hand -->
