---
examples:
  - - "str_getcsv('\"abc\",\"def\",\"ghi\"');"
  - - "str_getcsv('\"row2\"\"cell1\",\"row2cell2\",\"row2cell3\"', null, null, '\"');"
returns:
  - - "['abc', 'def', 'ghi']"
  - - "['row2\"cell1', 'row2cell2', 'row2cell3']"
authors:
  original by:
    - 'Brett Zamir (http://brett-zamir.me)'
notes: []
layout: function
function: str_getcsv
category: strings
code: "function str_getcsv (input, delimiter, enclosure, escape) {\n  //  discuss at: http://phpjs.org/functions/str_getcsv/\n  // original by: Brett Zamir (http://brett-zamir.me)\n  //   example 1: str_getcsv('\"abc\",\"def\",\"ghi\"');\n  //   returns 1: ['abc', 'def', 'ghi']\n  //   example 2: str_getcsv('\"row2\"\"cell1\",\"row2cell2\",\"row2cell3\"', null, null, '\"');\n  //   returns 2: ['row2\"cell1', 'row2cell2', 'row2cell3']\n\n  /*\n  // These test cases allowing for missing delimiters are not currently supported\n    str_getcsv('\"row2\"\"cell1\",row2cell2,row2cell3', null, null, '\"');\n    ['row2\"cell1', 'row2cell2', 'row2cell3']\n\n    str_getcsv('row1cell1,\"row1,cell2\",row1cell3', null, null, '\"');\n    ['row1cell1', 'row1,cell2', 'row1cell3']\n\n    str_getcsv('\"row2\"\"cell1\",row2cell2,\"row2\"\"\"\"cell3\"');\n    ['row2\"cell1', 'row2cell2', 'row2\"\"cell3']\n\n    str_getcsv('row1cell1,\"row1,cell2\",\"row1\"\",\"\"cell3\"', null, null, '\"');\n    ['row1cell1', 'row1,cell2', 'row1\",\"cell3'];\n\n    Should also test newlines within\n  */\n\n  var i, inpLen, output = []\n  var backwards = function (str) {\n    // We need to go backwards to simulate negative look-behind (don't split on\n    // an escaped enclosure even if followed by the delimiter and another enclosure mark)\n    return str.split('')\n      .reverse()\n      .join('')\n  }\n  var pq = function (str) {\n    // preg_quote()\n    return String(str)\n      .replace(/([\\\\\\.\\+\\*\\?\\[\\^\\]\\$\\(\\)\\{\\}\\=\\!<\\>\\|\\:])/g, '\\\\$1')\n  }\n\n  delimiter = delimiter || ','\n  enclosure = enclosure || '\"'\n  escape = escape || '\\\\'\n  var pqEnc = pq(enclosure)\n  var pqEsc = pq(escape)\n\n  input = input.replace(new RegExp('^\\\\s*' + pqEnc), '')\n    .replace(new RegExp(pqEnc + '\\\\s*$'), '')\n\n  // PHP behavior may differ by including whitespace even outside of the enclosure\n  input = backwards(input)\n    .split(new RegExp(pqEnc + '\\\\s*' + pq(delimiter) + '\\\\s*' + pqEnc + '(?!' + pqEsc + ')',\n      'g'))\n    .reverse()\n\n  for (i = 0, inpLen = input.length; i < inpLen; i++) {\n    output.push(backwards(input[i])\n      .replace(new RegExp(pqEsc + pqEnc, 'g'), enclosure))\n  }\n\n  return output\n}\n"
permalink: /functions/str_getcsv/
redirect_from:
  - /functions/strings/str_getcsv/
---

<!-- WARNING! This file is auto generated by `npm run web:inject`, do not edit by hand -->
