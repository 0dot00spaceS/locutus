---
examples:
  - - "htmlspecialchars(\"<a href='test'>Test</a>\", 'ENT_QUOTES');"
  - - "htmlspecialchars(\"ab\\\"c'd\", ['ENT_NOQUOTES', 'ENT_QUOTES']);"
  - - "htmlspecialchars('my \"&entity;\" is still here', null, null, false);"
returns:
  - - "'&lt;a href=&#039;test&#039;&gt;Test&lt;/a&gt;'"
  - - "'ab\"c&#039;d'"
  - - "'my &quot;&entity;&quot; is still here'"
authors:
  original by:
    - Mirek Slugen
  improved by:
    - 'Kevin van Zonneveld (http://kevin.vanzonneveld.net)'
  bugfixed by:
    - Nathan
    - Arno
    - 'Brett Zamir (http://brett-zamir.me)'
    - 'Brett Zamir (http://brett-zamir.me)'
  revised by:
    - 'Kevin van Zonneveld (http://kevin.vanzonneveld.net)'
  input by:
    - Ratheous
    - 'Mailfaker (http://www.weedem.fr/)'
    - felix
notes: []
layout: function
function: htmlspecialchars
category: strings
code: "function htmlspecialchars (string, quote_style, charset, double_encode) {\n  //       discuss at: http://phpjs.org/functions/htmlspecialchars/\n  //      original by: Mirek Slugen\n  //      improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n  //      bugfixed by: Nathan\n  //      bugfixed by: Arno\n  //      bugfixed by: Brett Zamir (http://brett-zamir.me)\n  //      bugfixed by: Brett Zamir (http://brett-zamir.me)\n  //       revised by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n  //         input by: Ratheous\n  //         input by: Mailfaker (http://www.weedem.fr/)\n  //         input by: felix\n  // reimplemented by: Brett Zamir (http://brett-zamir.me)\n  //             note: charset argument not supported\n  //        example 1: htmlspecialchars(\"<a href='test'>Test</a>\", 'ENT_QUOTES');\n  //        returns 1: '&lt;a href=&#039;test&#039;&gt;Test&lt;/a&gt;'\n  //        example 2: htmlspecialchars(\"ab\\\"c'd\", ['ENT_NOQUOTES', 'ENT_QUOTES']);\n  //        returns 2: 'ab\"c&#039;d'\n  //        example 3: htmlspecialchars('my \"&entity;\" is still here', null, null, false);\n  //        returns 3: 'my &quot;&entity;&quot; is still here'\n\n  var optTemp = 0,\n    i = 0,\n    noquotes = false\n  if (typeof quote_style === 'undefined' || quote_style === null) {\n    quote_style = 2\n  }\n  string = string || ''\n  string = string.toString()\n  if (double_encode !== false) {\n    // Put this first to avoid double-encoding\n    string = string.replace(/&/g, '&amp;')\n  }\n  string = string.replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n\n  var OPTS = {\n    'ENT_NOQUOTES': 0,\n    'ENT_HTML_QUOTE_SINGLE': 1,\n    'ENT_HTML_QUOTE_DOUBLE': 2,\n    'ENT_COMPAT': 2,\n    'ENT_QUOTES': 3,\n    'ENT_IGNORE': 4\n  }\n  if (quote_style === 0) {\n    noquotes = true\n  }\n  if (typeof quote_style !== 'number') {\n    // Allow for a single string or an array of string flags\n    quote_style = [].concat(quote_style)\n    for (i = 0; i < quote_style.length; i++) {\n      // Resolve string input to bitwise e.g. 'ENT_IGNORE' becomes 4\n      if (OPTS[quote_style[i]] === 0) {\n        noquotes = true\n      } else if (OPTS[quote_style[i]]) {\n        optTemp = optTemp | OPTS[quote_style[i]]\n      }\n    }\n    quote_style = optTemp\n  }\n  if (quote_style & OPTS.ENT_HTML_QUOTE_SINGLE) {\n    string = string.replace(/'/g, '&#039;')\n  }\n  if (!noquotes) {\n    string = string.replace(/\"/g, '&quot;')\n  }\n\n  return string\n}\n"
permalink: /functions/htmlspecialchars/
redirect_from:
  - /functions/strings/htmlspecialchars/
---

<!-- WARNING! This file is auto generated by `npm run web:inject`, do not edit by hand -->
