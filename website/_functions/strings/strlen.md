---
examples:
  - - "strlen('Kevin van Zonneveld');"
  - - "ini_set('unicode.semantics', 'on');"
    - "strlen('A\\ud87e\\udc04Z');"
returns:
  - - '19'
  - - '3'
authors:
  original by:
    - 'Kevin van Zonneveld (http://kevin.vanzonneveld.net)'
  improved by:
    - Sakimori
    - 'Kevin van Zonneveld (http://kevin.vanzonneveld.net)'
  bugfixed by:
    - Onno Marsman
  revised by:
    - 'Brett Zamir (http://brett-zamir.me)'
  input by:
    - Kirk Strobeck
notes:
  - - 'May look like overkill, but in order to be truly faithful to handling all Unicode'
    - characters and to this function in PHP which does not count the number of bytes
    - 'but counts the number of characters, something like this is really necessary.'
layout: function
function: strlen
category: strings
code: "function strlen (string) {\n  //  discuss at: http://phpjs.org/functions/strlen/\n  // original by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n  // improved by: Sakimori\n  // improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n  //    input by: Kirk Strobeck\n  // bugfixed by: Onno Marsman\n  //  revised by: Brett Zamir (http://brett-zamir.me)\n  //        note: May look like overkill, but in order to be truly faithful to handling all Unicode\n  //        note: characters and to this function in PHP which does not count the number of bytes\n  //        note: but counts the number of characters, something like this is really necessary.\n  //   example 1: strlen('Kevin van Zonneveld');\n  //   returns 1: 19\n  //   example 2: ini_set('unicode.semantics', 'on');\n  //   example 2: strlen('A\\ud87e\\udc04Z');\n  //   returns 2: 3\n\n  var str = string + ''\n  var i = 0,\n    chr = '',\n    lgth = 0\n\n  if (!this.php_js || !this.php_js.ini || !this.php_js.ini['unicode.semantics'] || this.php_js.ini[\n      'unicode.semantics'].local_value.toLowerCase() !== 'on') {\n    return string.length\n  }\n\n  var getWholeChar = function (str, i) {\n    var code = str.charCodeAt(i)\n    var next = '',\n      prev = ''\n    if (0xD800 <= code && code <= 0xDBFF) {\n      // High surrogate (could change last hex to 0xDB7F to treat high private surrogates as single characters)\n      if (str.length <= (i + 1)) {\n        throw 'High surrogate without following low surrogate'\n      }\n      next = str.charCodeAt(i + 1)\n      if (0xDC00 > next || next > 0xDFFF) {\n        throw 'High surrogate without following low surrogate'\n      }\n      return str.charAt(i) + str.charAt(i + 1)\n    } else if (0xDC00 <= code && code <= 0xDFFF) {\n      // Low surrogate\n      if (i === 0) {\n        throw 'Low surrogate without preceding high surrogate'\n      }\n      prev = str.charCodeAt(i - 1)\n      if (0xD800 > prev || prev > 0xDBFF) {\n        // (could change last hex to 0xDB7F to treat high private surrogates as single characters)\n        throw 'Low surrogate without preceding high surrogate'\n      }\n      // We can pass over low surrogates now as the second component in a pair which we have already processed\n      return false\n    }\n    return str.charAt(i)\n  }\n\n  for (i = 0, lgth = 0; i < str.length; i++) {\n    if ((chr = getWholeChar(str, i)) === false) {\n      continue\n    } // Adapt this line at the top of any loop, passing in the whole string and the current iteration and returning a variable to represent the individual character; purpose is to treat the first part of a surrogate pair as the whole character and then ignore the second part\n    lgth++\n  }\n  return lgth\n}\n"
permalink: /functions/strlen/
redirect_from:
  - /functions/strings/strlen/
---

<!-- WARNING! This file is auto generated by `npm run web:inject`, do not edit by hand -->
