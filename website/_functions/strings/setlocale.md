---
examples:
  - - "setlocale('LC_ALL', 'en_US');"
returns:
  - - "'en_US'"
authors:
  original by:
    - 'Brett Zamir (http://brett-zamir.me)'
    - 'Blues at http://hacks.bluesmoon.info/strftime/strftime.js'
    - 'YUI Library: http://developer.yahoo.com/yui/docs/YAHOO.util.DateLocale.html'
notes:
  - - 'Is extensible, but currently only implements locales en,'
    - 'en_US, en_GB, en_AU, fr, and fr_CA for LC_TIME only; C for LC_CTYPE;'
    - C and en for LC_MONETARY/LC_NUMERIC; en for LC_COLLATE
    - 'Uses global: php_js to store locale info'
    - 'Consider using http://demo.icu-project.org/icu-bin/locexp as basis for localization (as in i18n_loc_set_default())'
layout: function
function: setlocale
category: strings
code: "function setlocale (category, locale) {\n  //  discuss at: http://phpjs.org/functions/setlocale/\n  // original by: Brett Zamir (http://brett-zamir.me)\n  // original by: Blues at http://hacks.bluesmoon.info/strftime/strftime.js\n  // original by: YUI Library: http://developer.yahoo.com/yui/docs/YAHOO.util.DateLocale.html\n  //  depends on: getenv\n  //        note: Is extensible, but currently only implements locales en,\n  //        note: en_US, en_GB, en_AU, fr, and fr_CA for LC_TIME only; C for LC_CTYPE;\n  //        note: C and en for LC_MONETARY/LC_NUMERIC; en for LC_COLLATE\n  //        note: Uses global: php_js to store locale info\n  //        note: Consider using http://demo.icu-project.org/icu-bin/locexp as basis for localization (as in i18n_loc_set_default())\n  //   example 1: setlocale('LC_ALL', 'en_US');\n  //   returns 1: 'en_US'\n\n  var categ = '',\n    cats = [],\n    i = 0,\n    d = this.window.document\n\n  // BEGIN STATIC\n  var _copy = function _copy (orig) {\n    if (orig instanceof RegExp) {\n      return new RegExp(orig)\n    } else if (orig instanceof Date) {\n      return new Date(orig)\n    }\n    var newObj = {}\n    for (var i in orig) {\n      if (typeof orig[i] === 'object') {\n        newObj[i] = _copy(orig[i])\n      } else {\n        newObj[i] = orig[i]\n      }\n    }\n    return newObj\n  }\n\n  // Function usable by a ngettext implementation (apparently not an accessible part of setlocale(), but locale-specific)\n  // See http://www.gnu.org/software/gettext/manual/gettext.html#Plural-forms though amended with others from\n  // https://developer.mozilla.org/En/Localization_and_Plurals (new categories noted with \"MDC\" below, though\n  // not sure of whether there is a convention for the relative order of these newer groups as far as ngettext)\n  // The function name indicates the number of plural forms (nplural)\n  // Need to look into http://cldr.unicode.org/ (maybe future JavaScript); Dojo has some functions (under new BSD),\n  // including JSON conversions of LDML XML from CLDR: http://bugs.dojotoolkit.org/browser/dojo/trunk/cldr\n  // and docs at http://api.dojotoolkit.org/jsdoc/HEAD/dojo.cldr\n  var _nplurals1 = function (n) {\n    // e.g., Japanese\n    return 0\n  }\n  var _nplurals2a = function (n) {\n    // e.g., English\n    return n !== 1 ? 1 : 0\n  }\n  var _nplurals2b = function (n) {\n    // e.g., French\n    return n > 1 ? 1 : 0\n  }\n  var _nplurals2c = function (n) {\n    // e.g., Icelandic (MDC)\n    return n % 10 === 1 && n % 100 !== 11 ? 0 : 1\n  }\n  var _nplurals3a = function (n) {\n    // e.g., Latvian (MDC has a different order from gettext)\n    return n % 10 === 1 && n % 100 !== 11 ? 0 : n !== 0 ? 1 : 2\n  }\n  var _nplurals3b = function (n) {\n    // e.g., Scottish Gaelic\n    return n === 1 ? 0 : n === 2 ? 1 : 2\n  }\n  var _nplurals3c = function (n) {\n    // e.g., Romanian\n    return n === 1 ? 0 : (n === 0 || (n % 100 > 0 && n % 100 < 20)) ? 1 : 2\n  }\n  var _nplurals3d = function (n) {\n    // e.g., Lithuanian (MDC has a different order from gettext)\n    return n % 10 === 1 && n % 100 !== 11 ? 0 : n % 10 >= 2 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2\n  }\n  var _nplurals3e = function (n) {\n    // e.g., Croatian\n    return n % 10 === 1 && n % 100 !== 11 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 :\n      2\n  }\n  var _nplurals3f = function (n) {\n    // e.g., Slovak\n    return n === 1 ? 0 : n >= 2 && n <= 4 ? 1 : 2\n  }\n  var _nplurals3g = function (n) {\n    // e.g., Polish\n    return n === 1 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2\n  }\n  var _nplurals3h = function (n) {\n    // e.g., Macedonian (MDC)\n    return n % 10 === 1 ? 0 : n % 10 === 2 ? 1 : 2\n  }\n  var _nplurals4a = function (n) {\n    // e.g., Slovenian\n    return n % 100 === 1 ? 0 : n % 100 === 2 ? 1 : n % 100 === 3 || n % 100 === 4 ? 2 : 3\n  }\n  var _nplurals4b = function (n) {\n    // e.g., Maltese (MDC)\n    return n === 1 ? 0 : n === 0 || (n % 100 && n % 100 <= 10) ? 1 : n % 100 >= 11 && n % 100 <= 19 ? 2 : 3\n  }\n  var _nplurals5 = function (n) {\n    // e.g., Irish Gaeilge (MDC)\n    return n === 1 ? 0 : n === 2 ? 1 : n >= 3 && n <= 6 ? 2 : n >= 7 && n <= 10 ? 3 : 4\n  }\n  var _nplurals6 = function (n) {\n    // e.g., Arabic (MDC) - Per MDC puts 0 as last group\n    return n === 0 ? 5 : n === 1 ? 0 : n === 2 ? 1 : n % 100 >= 3 && n % 100 <= 10 ? 2 : n % 100 >= 11 && n % 100 <=\n      99 ? 3 : 4\n  }\n  // END STATIC\n  // BEGIN REDUNDANT\n  try {\n    this.php_js = this.php_js || {}\n  } catch (e) {\n    this.php_js = {}\n  }\n\n  var phpjs = this.php_js\n\n  // Reconcile Windows vs. *nix locale names?\n  // Allow different priority orders of languages, esp. if implement gettext as in\n  //     LANGUAGE env. var.? (e.g., show German if French is not available)\n  if (!phpjs.locales) {\n    // Can add to the locales\n    phpjs.locales = {}\n\n    phpjs.locales.en = {\n      'LC_COLLATE': // For strcoll\n\n        function (str1, str2) {\n        // Fix: This one taken from strcmp, but need for other locales; we don't use localeCompare since its locale is not settable\n          return (str1 == str2) ? 0 : ((str1 > str2) ? 1 : -1)\n        },\n      'LC_CTYPE': {\n        // Need to change any of these for English as opposed to C?\n        an: /^[A-Za-z\\d]+$/g,\n        al: /^[A-Za-z]+$/g,\n        ct: /^[\\u0000-\\u001F\\u007F]+$/g,\n        dg: /^[\\d]+$/g,\n        gr: /^[\\u0021-\\u007E]+$/g,\n        lw: /^[a-z]+$/g,\n        pr: /^[\\u0020-\\u007E]+$/g,\n        pu: /^[\\u0021-\\u002F\\u003A-\\u0040\\u005B-\\u0060\\u007B-\\u007E]+$/g,\n        sp: /^[\\f\\n\\r\\t\\v ]+$/g,\n        up: /^[A-Z]+$/g,\n        xd: /^[A-Fa-f\\d]+$/g,\n        CODESET: 'UTF-8',\n        // Used by sql_regcase\n        lower: 'abcdefghijklmnopqrstuvwxyz',\n        upper: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'\n      },\n      'LC_TIME': {\n        // Comments include nl_langinfo() constant equivalents and any changes from Blues' implementation\n        a: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],\n        // ABDAY_\n        A: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\n        // DAY_\n        b: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n        // ABMON_\n        B: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October',\n          'November', 'December'\n        ],\n        // MON_\n        c: '%a %d %b %Y %r %Z',\n        // D_T_FMT // changed %T to %r per results\n        p: ['AM', 'PM'],\n        // AM_STR/PM_STR\n        P: ['am', 'pm'],\n        // Not available in nl_langinfo()\n        r: '%I:%M:%S %p',\n        // T_FMT_AMPM (Fixed for all locales)\n        x: '%m/%d/%Y',\n        // D_FMT // switched order of %m and %d; changed %y to %Y (C uses %y)\n        X: '%r',\n        // T_FMT // changed from %T to %r  (%T is default for C, not English US)\n        // Following are from nl_langinfo() or http://www.cptec.inpe.br/sx4/sx4man2/g1ab02e/strftime.4.html\n        alt_digits: '',\n        // e.g., ordinal\n        ERA: '',\n        ERA_YEAR: '',\n        ERA_D_T_FMT: '',\n        ERA_D_FMT: '',\n        ERA_T_FMT: ''\n      },\n      // Assuming distinction between numeric and monetary is thus:\n      // See below for C locale\n      'LC_MONETARY': {\n        // based on Windows \"english\" (English_United States.1252) locale\n        int_curr_symbol: 'USD',\n        currency_symbol: '$',\n        mon_decimal_point: '.',\n        mon_thousands_sep: ',',\n        mon_grouping: [3],\n        // use mon_thousands_sep; \"\" for no grouping; additional array members indicate successive group lengths after first group (e.g., if to be 1,23,456, could be [3, 2])\n        positive_sign: '',\n        negative_sign: '-',\n        int_frac_digits: 2,\n        // Fractional digits only for money defaults?\n        frac_digits: 2,\n        p_cs_precedes: 1,\n        // positive currency symbol follows value = 0; precedes value = 1\n        p_sep_by_space: 0,\n        // 0: no space between curr. symbol and value; 1: space sep. them unless symb. and sign are adjacent then space sep. them from value; 2: space sep. sign and value unless symb. and sign are adjacent then space separates\n        n_cs_precedes: 1,\n        // see p_cs_precedes\n        n_sep_by_space: 0,\n        // see p_sep_by_space\n        p_sign_posn: 3,\n        // 0: parentheses surround quantity and curr. symbol; 1: sign precedes them; 2: sign follows them; 3: sign immed. precedes curr. symbol; 4: sign immed. succeeds curr. symbol\n        n_sign_posn: 0 // see p_sign_posn\n      },\n      'LC_NUMERIC': {\n        // based on Windows \"english\" (English_United States.1252) locale\n        decimal_point: '.',\n        thousands_sep: ',',\n        grouping: [3] // see mon_grouping, but for non-monetary values (use thousands_sep)\n      },\n      'LC_MESSAGES': {\n        YESEXPR: '^[yY].*',\n        NOEXPR: '^[nN].*',\n        YESSTR: '',\n        NOSTR: ''\n      },\n      nplurals: _nplurals2a\n    }\n    phpjs.locales.en_US = _copy(phpjs.locales.en)\n    phpjs.locales.en_US.LC_TIME.c = '%a %d %b %Y %r %Z'\n    phpjs.locales.en_US.LC_TIME.x = '%D'\n    phpjs.locales.en_US.LC_TIME.X = '%r'\n    // The following are based on *nix settings\n    phpjs.locales.en_US.LC_MONETARY.int_curr_symbol = 'USD '\n    phpjs.locales.en_US.LC_MONETARY.p_sign_posn = 1\n    phpjs.locales.en_US.LC_MONETARY.n_sign_posn = 1\n    phpjs.locales.en_US.LC_MONETARY.mon_grouping = [3, 3]\n    phpjs.locales.en_US.LC_NUMERIC.thousands_sep = ''\n    phpjs.locales.en_US.LC_NUMERIC.grouping = []\n\n    phpjs.locales.en_GB = _copy(phpjs.locales.en)\n    phpjs.locales.en_GB.LC_TIME.r = '%l:%M:%S %P %Z'\n\n    phpjs.locales.en_AU = _copy(phpjs.locales.en_GB)\n    // Assume C locale is like English (?) (We need C locale for LC_CTYPE)\n    phpjs.locales.C = _copy(phpjs.locales.en)\n    phpjs.locales.C.LC_CTYPE.CODESET = 'ANSI_X3.4-1968'\n    phpjs.locales.C.LC_MONETARY = {\n      int_curr_symbol: '',\n      currency_symbol: '',\n      mon_decimal_point: '',\n      mon_thousands_sep: '',\n      mon_grouping: [],\n      p_cs_precedes: 127,\n      p_sep_by_space: 127,\n      n_cs_precedes: 127,\n      n_sep_by_space: 127,\n      p_sign_posn: 127,\n      n_sign_posn: 127,\n      positive_sign: '',\n      negative_sign: '',\n      int_frac_digits: 127,\n      frac_digits: 127\n    }\n    phpjs.locales.C.LC_NUMERIC = {\n      decimal_point: '.',\n      thousands_sep: '',\n      grouping: []\n    }\n    // D_T_FMT\n    phpjs.locales.C.LC_TIME.c = '%a %b %e %H:%M:%S %Y'\n    // D_FMT\n    phpjs.locales.C.LC_TIME.x = '%m/%d/%y'\n    // T_FMT\n    phpjs.locales.C.LC_TIME.X = '%H:%M:%S'\n    phpjs.locales.C.LC_MESSAGES.YESEXPR = '^[yY]'\n    phpjs.locales.C.LC_MESSAGES.NOEXPR = '^[nN]'\n\n    phpjs.locales.fr = _copy(phpjs.locales.en)\n    phpjs.locales.fr.nplurals = _nplurals2b\n    phpjs.locales.fr.LC_TIME.a = ['dim', 'lun', 'mar', 'mer', 'jeu', 'ven', 'sam']\n    phpjs.locales.fr.LC_TIME.A = ['dimanche', 'lundi', 'mardi', 'mercredi', 'jeudi', 'vendredi', 'samedi']\n    phpjs.locales.fr.LC_TIME.b = ['jan', 'f\\u00E9v', 'mar', 'avr', 'mai', 'jun', 'jui', 'ao\\u00FB', 'sep', 'oct',\n      'nov', 'd\\u00E9c'\n    ]\n    phpjs.locales.fr.LC_TIME.B = ['janvier', 'f\\u00E9vrier', 'mars', 'avril', 'mai', 'juin', 'juillet', 'ao\\u00FBt',\n      'septembre', 'octobre', 'novembre', 'd\\u00E9cembre'\n    ]\n    phpjs.locales.fr.LC_TIME.c = '%a %d %b %Y %T %Z'\n    phpjs.locales.fr.LC_TIME.p = ['', '']\n    phpjs.locales.fr.LC_TIME.P = ['', '']\n    phpjs.locales.fr.LC_TIME.x = '%d.%m.%Y'\n    phpjs.locales.fr.LC_TIME.X = '%T'\n\n    phpjs.locales.fr_CA = _copy(phpjs.locales.fr)\n    phpjs.locales.fr_CA.LC_TIME.x = '%Y-%m-%d'\n  }\n  if (!phpjs.locale) {\n    phpjs.locale = 'en_US'\n    var NS_XHTML = 'http://www.w3.org/1999/xhtml'\n    var NS_XML = 'http://www.w3.org/XML/1998/namespace'\n    if (d.getElementsByTagNameNS && d.getElementsByTagNameNS(NS_XHTML, 'html')[0]) {\n      if (d.getElementsByTagNameNS(NS_XHTML, 'html')[0].getAttributeNS && d.getElementsByTagNameNS(NS_XHTML,\n          'html')[0].getAttributeNS(NS_XML, 'lang')) {\n        phpjs.locale = d.getElementsByTagName(NS_XHTML, 'html')[0].getAttributeNS(NS_XML, 'lang')\n      } else if (d.getElementsByTagNameNS(NS_XHTML, 'html')[0].lang) {\n        // XHTML 1.0 only\n        phpjs.locale = d.getElementsByTagNameNS(NS_XHTML, 'html')[0].lang\n      }\n    } else if (d.getElementsByTagName('html')[0] && d.getElementsByTagName('html')[0].lang) {\n      phpjs.locale = d.getElementsByTagName('html')[0].lang\n    }\n  }\n  // PHP-style\n  phpjs.locale = phpjs.locale.replace('-', '_')\n  // Fix locale if declared locale hasn't been defined\n  if (!(phpjs.locale in phpjs.locales)) {\n    if (phpjs.locale.replace(/_[a-zA-Z]+$/, '') in phpjs.locales) {\n      phpjs.locale = phpjs.locale.replace(/_[a-zA-Z]+$/, '')\n    }\n  }\n\n  if (!phpjs.localeCategories) {\n    phpjs.localeCategories = {\n      'LC_COLLATE': phpjs.locale,\n      // for string comparison, see strcoll()\n      'LC_CTYPE': phpjs.locale,\n      // for character classification and conversion, for example strtoupper()\n      'LC_MONETARY': phpjs.locale,\n      // for localeconv()\n      'LC_NUMERIC': phpjs.locale,\n      // for decimal separator (See also localeconv())\n      'LC_TIME': phpjs.locale,\n      // for date and time formatting with strftime()\n      'LC_MESSAGES': phpjs.locale // for system responses (available if PHP was compiled with libintl)\n    }\n  }\n  // END REDUNDANT\n  if (locale === null || locale === '') {\n    locale = this.getenv(category) || this.getenv('LANG')\n  } else if (Object.prototype.toString.call(locale) === '[object Array]') {\n    for (i = 0; i < locale.length; i++) {\n      if (!(locale[i] in this.php_js.locales)) {\n        if (i === locale.length - 1) {\n          // none found\n          return false\n        }\n        continue\n      }\n      locale = locale[i]\n      break\n    }\n  }\n\n  // Just get the locale\n  if (locale === '0' || locale === 0) {\n    if (category === 'LC_ALL') {\n      for (categ in this.php_js.localeCategories) {\n        // Add \".UTF-8\" or allow \".@latint\", etc. to the end?\n        cats.push(categ + '=' + this.php_js.localeCategories[categ])\n      }\n      return cats.join(';')\n    }\n    return this.php_js.localeCategories[category]\n  }\n\n  if (!(locale in this.php_js.locales)) {\n    // Locale not found\n    return false\n  }\n\n  // Set and get locale\n  if (category === 'LC_ALL') {\n    for (categ in this.php_js.localeCategories) {\n      this.php_js.localeCategories[categ] = locale\n    }\n  } else {\n    this.php_js.localeCategories[category] = locale\n  }\n  return locale\n}\n"
permalink: /functions/setlocale/
redirect_from:
  - /functions/strings/setlocale/
---

<!-- WARNING! This file is auto generated by `npm run web:inject`, do not edit by hand -->
