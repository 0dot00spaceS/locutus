---
examples:
  - - "metaphone('Gnu');"
  - - "metaphone('bigger');"
  - - "metaphone('accuracy');"
  - - "metaphone('batch batcher');"
returns:
  - - "'N'"
  - - "'BKR'"
  - - "'AKKRS'"
  - - "'BXBXR'"
authors:
  original by:
    - Greg Frazier
  improved by:
    - 'Brett Zamir (http://brett-zamir.me)'
    - 'Rafał Kukawski (http://kukawski.pl)'
notes: []
layout: function
function: metaphone
category: strings
code: "function metaphone (word, max_phonemes) {\n  //  discuss at: http://phpjs.org/functions/metaphone/\n  // original by: Greg Frazier\n  // improved by: Brett Zamir (http://brett-zamir.me)\n  // improved by: Rafał Kukawski (http://kukawski.pl)\n  //   example 1: metaphone('Gnu');\n  //   returns 1: 'N'\n  //   example 2: metaphone('bigger');\n  //   returns 2: 'BKR'\n  //   example 3: metaphone('accuracy');\n  //   returns 3: 'AKKRS'\n  //   example 4: metaphone('batch batcher');\n  //   returns 4: 'BXBXR'\n\n  var type = typeof word\n\n  if (type === 'undefined' || type === 'object' && word !== null) {\n    // weird!\n    return null\n  }\n\n  // infinity and NaN values are treated as strings\n  if (type === 'number') {\n    if (isNaN(word)) {\n      word = 'NAN'\n    } else if (!isFinite(word)) {\n      word = 'INF'\n    }\n  }\n\n  if (max_phonemes < 0) {\n    return false\n  }\n\n  max_phonemes = Math.floor(+max_phonemes) || 0\n\n  // alpha depends on locale, so this var might need an update\n  // or should be turned into a regex\n  // for now assuming pure a-z\n  var alpha = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ',\n    vowel = 'AEIOU',\n    soft = 'EIY',\n    leadingNonAlpha = new RegExp('^[^' + alpha + ']+')\n\n  word = typeof word === 'string' ? word : ''\n  word = word.toUpperCase()\n    .replace(leadingNonAlpha, '')\n\n  if (!word) {\n    return ''\n  }\n\n  var is = function (p, c) {\n    return c !== '' && p.indexOf(c) !== -1\n  }\n\n  var i = 0,\n    cc = word.charAt(0), // current char. Short name, because it's used all over the function\n    nc = word.charAt(1), // next char\n    nnc, // after next char\n    pc, // previous char\n    l = word.length,\n    meta = '',\n    // traditional is an internal param that could be exposed\n    // for now let it be a local var\n    traditional = true\n\n  switch (cc) {\n    case 'A':\n      meta += nc === 'E' ? nc : cc\n      i += 1\n      break\n    case 'G':\n    case 'K':\n    case 'P':\n      if (nc === 'N') {\n        meta += nc\n        i += 2\n      }\n      break\n    case 'W':\n      if (nc === 'R') {\n        meta += nc\n        i += 2\n      } else if (nc === 'H' || is(vowel, nc)) {\n        meta += 'W'\n        i += 2\n      }\n      break\n    case 'X':\n      meta += 'S'\n      i += 1\n      break\n    case 'E':\n    case 'I':\n    case 'O':\n    case 'U':\n      meta += cc\n      i++\n      break\n  }\n\n  for (; i < l && (max_phonemes === 0 || meta.length < max_phonemes); i += 1) {\n    cc = word.charAt(i)\n    nc = word.charAt(i + 1)\n    pc = word.charAt(i - 1)\n    nnc = word.charAt(i + 2)\n\n    if (cc === pc && cc !== 'C') {\n      continue\n    }\n\n    switch (cc) {\n      case 'B':\n        if (pc !== 'M') {\n          meta += cc\n        }\n        break\n      case 'C':\n        if (is(soft, nc)) {\n          if (nc === 'I' && nnc === 'A') {\n            meta += 'X'\n          } else if (pc !== 'S') {\n            meta += 'S'\n          }\n        } else if (nc === 'H') {\n          meta += !traditional && (nnc === 'R' || pc === 'S') ? 'K' : 'X'\n          i += 1\n        } else {\n          meta += 'K'\n        }\n        break\n      case 'D':\n        if (nc === 'G' && is(soft, nnc)) {\n          meta += 'J'\n          i += 1\n        } else {\n          meta += 'T'\n        }\n        break\n      case 'G':\n        if (nc === 'H') {\n          if (!(is('BDH', word.charAt(i - 3)) || word.charAt(i - 4) === 'H')) {\n            meta += 'F'\n            i += 1\n          }\n        } else if (nc === 'N') {\n          if (is(alpha, nnc) && word.substr(i + 1, 3) !== 'NED') {\n            meta += 'K'\n          }\n        } else if (is(soft, nc) && pc !== 'G') {\n          meta += 'J'\n        } else {\n          meta += 'K'\n        }\n        break\n      case 'H':\n        if (is(vowel, nc) && !is('CGPST', pc)) {\n          meta += cc\n        }\n        break\n      case 'K':\n        if (pc !== 'C') {\n          meta += 'K'\n        }\n        break\n      case 'P':\n        meta += nc === 'H' ? 'F' : cc\n        break\n      case 'Q':\n        meta += 'K'\n        break\n      case 'S':\n        if (nc === 'I' && is('AO', nnc)) {\n          meta += 'X'\n        } else if (nc === 'H') {\n          meta += 'X'\n          i += 1\n        } else if (!traditional && word.substr(i + 1, 3) === 'CHW') {\n          meta += 'X'\n          i += 2\n        } else {\n          meta += 'S'\n        }\n        break\n      case 'T':\n        if (nc === 'I' && is('AO', nnc)) {\n          meta += 'X'\n        } else if (nc === 'H') {\n          meta += '0'\n          i += 1\n        } else if (word.substr(i + 1, 2) !== 'CH') {\n          meta += 'T'\n        }\n        break\n      case 'V':\n        meta += 'F'\n        break\n      case 'W':\n      case 'Y':\n        if (is(vowel, nc)) {\n          meta += cc\n        }\n        break\n      case 'X':\n        meta += 'KS'\n        break\n      case 'Z':\n        meta += 'S'\n        break\n      case 'F':\n      case 'J':\n      case 'L':\n      case 'M':\n      case 'N':\n      case 'R':\n        meta += cc\n        break\n    }\n  }\n\n  return meta\n\n  /*\n  \"    abc\", \"ABK\", // skip leading whitespace\n  \"1234.678!@abc\", \"ABK\", // skip leading non-alpha chars\n  \"aero\", \"ER\", // leading 'a' followed by 'e' turns into 'e'\n  \"air\", \"AR\", // leading 'a' turns into 'e', other vowels ignored\n  // leading vowels added to result\n  \"egg\", \"EK\",\n  \"if\", \"IF\",\n  \"of\", \"OF\",\n  \"use\", \"US\",\n  // other vowels ignored\n  \"xAEIOU\", \"S\",\n  // GN, KN, PN become 'N'\n  \"gnome\", \"NM\",\n  \"knight\", \"NFT\",\n  \"pneumatic\", \"NMTK\",\n  // leading 'WR' becomes 'R'\n  \"wrong\", \"RNK\",\n  // leading 'WH+vowel\" becomes 'W'\n  \"wheel\", \"WL\",\n  // leading 'X' becomes 'S', 'KS' otherwise\n  \"xerox\", \"SRKS\",\n  \"exchange\", \"EKSXNJ\",\n  // duplicate chars, except 'C' are ignored\n  \"accuracy\", \"AKKRS\",\n  \"blogger\", \"BLKR\",\n  \"fffound\", \"FNT\",\n  // ignore 'B' if after 'M'\n  \"billboard\", \"BLBRT\",\n  \"symbol\", \"SML\",\n  // 'CIA' -> 'X'\n  \"special\", \"SPXL\",\n  // 'SC[IEY]' -> 'C' ignored\n  \"science\", \"SNS\",\n  // '[^S]C' -> 'C' becomes 'S'\n  \"dance\", \"TNS\",\n  // 'CH' -> 'X'\n  \"change\", \"XNJ\",\n  \"school\", \"SXL\",\n  // 'C' -> 'K'\n  \"micro\", \"MKR\",\n  // 'DGE', 'DGI', DGY' -> 'J'\n  // 'T' otherwise\n  \"bridge\", \"BRJ\",\n  \"pidgin\", \"PJN\",\n  \"edgy\", \"EJ\",\n  \"handgun\", \"HNTKN\",\n  \"draw\", \"TR\",\n  //'GN\\b' 'GNED' -> ignore 'G'\n  \"sign\", \"SN\",\n  \"signed\", \"SNT\",\n  \"signs\", \"SKNS\",\n  // [^G]G[EIY] -> 'J'...\n  \"agency\", \"AJNS\",\n  // 'GH' -> 'F' if not b--gh, d--gh, h--gh\n  \"night\", \"NFT\",\n  \"bright\", \"BRT\",\n  \"height\", \"HT\",\n  \"midnight\", \"MTNT\",\n  // 'K' otherwise\n  \"jogger\", \"JKR\",\n  // '[^CGPST]H[AEIOU]' -> 'H', ignore otherwise\n  \"horse\", \"HRS\",\n  \"adhere\", \"ATHR\",\n  \"mahjong\", \"MJNK\",\n  \"fight\", \"FFT\", // interesting\n  \"ghost\", \"FST\",\n  // 'K' -> 'K' if not after 'C'\n  \"ski\", \"SK\",\n  \"brick\", \"BRK\",\n  // 'PH' -> 'F'\n  \"phrase\", \"FRS\",\n  // 'P.' -> 'P'\n  \"hypnotic\", \"PNTK\",\n  \"topnotch\", \"TPNX\",\n  // 'Q' -> 'K'\n  \"quit\", \"KT\",\n  \"squid\", \"SKT\",\n  // 'SIO', 'SIA', 'SH' -> 'X'\n  \"version\", \"FRXN\",\n  \"silesia\", \"SLX\",\n  \"enthusiasm\", \"EN0XSM\",\n  \"shell\", \"XL\",\n  // 'S' -> 'S' in other cases\n  \"spy\", \"SP\",\n  \"system\", \"SSTM\",\n  // 'TIO', 'TIA' -> 'X'\n  \"ratio\", \"RX\",\n  \"nation\", \"NXN\",\n  \"spatial\", \"SPXL\",\n  // 'TH' -> '0'\n  \"the\", \"0\",\n  \"nth\", \"N0\",\n  \"truth\", \"TR0\",\n  // 'TCH' -> ignore 'T'\n  \"watch\", \"WX\",\n  // 'T' otherwise\n  \"vote\", \"FT\",\n  \"tweet\", \"TWT\",\n  // 'V' -> 'F'\n  \"evolve\", \"EFLF\",\n  // 'W' -> 'W' if followed by vowel\n  \"rewrite\", \"RRT\",\n  \"outwrite\", \"OTRT\",\n  \"artwork\", \"ARTWRK\",\n  // 'X' -> 'KS' if not first char\n  \"excel\", \"EKSSL\",\n  // 'Y' -> 'Y' if followed by vowel\n  \"cyan\", \"SYN\",\n  \"way\", \"W\",\n  \"hybrid\", \"BRT\",\n  // 'Z' -> 'S'\n  \"zip\", \"SP\",\n  \"zoom\", \"SM\",\n  \"jazz\", \"JS\",\n  \"zigzag\", \"SKSK\",\n  \"abc abc\", \"ABKBK\" // eventhough there are two words, second 'a' is ignored\n  */\n}\n"
permalink: /functions/metaphone/
redirect_from:
  - /functions/strings/metaphone/
---

<!-- WARNING! This file is auto generated by `npm run web:inject`, do not edit by hand -->
