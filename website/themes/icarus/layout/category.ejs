<% var curLang = '' %>
<% site.pages.find({ type: 'language', language: page.language }).each(function (lang) { %>
  <% curLang = lang %>
<% }) %>

<article class="article article-type-<%= page.layout %>" >
  <div class="article-inner">
    <header class="article-header">
      <h1 class="article-title"><%= page.title %></h1>
    </header>

    <div class="article-entry">
      <ul>
        <% site.pages.find({ language: page.language, category: page.category, type: 'function' }).each(function (func) { %>
          <li><a href="<%- url_for(func.path).replace('index.html', '') %>"><%- func.function %></a></li>
        <% }) %>
      </ul>

      <hr />
      <%
      var cnt = site.pages.find({ language: curLang.language, type: 'function' }).length
      var header = 'What?! Only ' + cnt + ' ' + curLang.human + ' function'
      if (cnt !== 1) {
        header += 's'
      }
      header += ' in all of Locutus?'
      if (cnt < 50) { %>
        <%- partial('locutus/add_more', {curLang: curLang, header: header}) %>
      <% } %>
    </div>
  </div>
</article>
